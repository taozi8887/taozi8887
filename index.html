<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>taozi4887 ‚Äî games & things</title>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0b;
    --surface: #111113;
    --surface2: #1a1a1d;
    --border: #252528;
    --border2: #303035;
    --text: #e8e8ea;
    --muted: #666670;
    --accent: #c8ff4a;
    --accent2: #ff6b6b;
    --accent3: #60efff;
    --radius: 12px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  html {
    scroll-behavior: smooth;
    background: var(--bg);
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 1000;
    opacity: 0.6;
  }

  /* ‚îÄ‚îÄ‚îÄ NAV ‚îÄ‚îÄ‚îÄ */
  nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 500;
    display: flex;
    justify-content: center;
    padding: 20px 24px;
    transition: background 0.3s, backdrop-filter 0.3s;
  }
  nav.scrolled {
    background: rgba(10, 10, 11, 0.8);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--border);
  }
  .nav-inner {
    width: 100%;
    max-width: 1000px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .logo {
    font-family: 'Instrument Serif', serif;
    font-size: 20px;
    letter-spacing: -0.5px;
    color: var(--text);
    text-decoration: none;
  }
  .logo span { color: var(--accent); }
  .nav-links {
    display: flex;
    gap: 32px;
    list-style: none;
  }
  .nav-links a {
    font-size: 11px;
    color: var(--muted);
    text-decoration: none;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    transition: color 0.2s;
    position: relative;
  }
  .nav-links a:hover { color: var(--text); }
  .nav-links a::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 1px;
    background: var(--accent);
    transition: width 0.25s ease;
  }
  .nav-links a:hover::after { width: 100%; }

  section {
    max-width: 1000px;
    margin: 0 auto;
    padding: 0 24px;
  }

  /* ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
    padding-top: 80px;
    padding-bottom: 60px;
  }
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 11px;
    color: var(--muted);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-bottom: 32px;
    opacity: 0;
    animation: fadeUp 0.6s ease 0.2s forwards;
  }
  .hero-badge .dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--accent);
    animation: pulse 2s ease infinite;
  }
  @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
  .hero-title {
    font-family: 'Instrument Serif', serif;
    font-size: clamp(48px, 9vw, 96px);
    line-height: 1.02;
    letter-spacing: -3px;
    margin-bottom: 28px;
    opacity: 0;
    animation: fadeUp 0.7s ease 0.35s forwards;
  }
  .hero-title em { font-style: italic; }
  .hero-title .accent { color: var(--accent); }
  .hero-sub {
    font-size: 13px;
    color: var(--muted);
    letter-spacing: 0.04em;
    line-height: 1.8;
    max-width: 420px;
    margin-bottom: 48px;
    opacity: 0;
    animation: fadeUp 0.7s ease 0.5s forwards;
  }
  .hero-cards {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    opacity: 0;
    animation: fadeUp 0.7s ease 0.65s forwards;
  }
  .hero-card {
    position: relative;
    height: 200px;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    overflow: hidden;
    cursor: pointer;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 20px;
    transition: border-color 0.3s, transform 0.3s;
  }
  .hero-card:hover { border-color: var(--accent); transform: translateY(-4px); }
  .hero-card-bg {
    position: absolute;
    inset: 0;
    z-index: 0;
    transition: transform 0.4s ease;
  }
  .hero-card:hover .hero-card-bg { transform: scale(1.05); }
  .hero-card-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(10,10,11,0.9) 0%, rgba(10,10,11,0.1) 100%);
    z-index: 1;
  }
  .hero-card-content { position: relative; z-index: 2; }
  .hero-card-title {
    font-family: 'Instrument Serif', serif;
    font-size: 22px;
    color: var(--text);
    letter-spacing: -0.5px;
    margin-bottom: 4px;
  }
  .hero-card-desc { font-size: 10px; color: var(--muted); letter-spacing: 0.06em; }
  .hero-card-arrow {
    position: absolute;
    top: 16px;
    right: 16px;
    z-index: 2;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,0.12);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--muted);
    font-size: 13px;
    transition: all 0.25s;
    background: rgba(10,10,11,0.4);
    backdrop-filter: blur(4px);
  }
  .hero-card:hover .hero-card-arrow { border-color: var(--accent); color: var(--accent); transform: translate(2px, -2px); }
  .card-graded .hero-card-bg { background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 50%, #c8ff4a 100%); opacity: 0.5; }
  .graded-preview {
    position: absolute; inset: 0; z-index: 0; display: flex; align-items: center; justify-content: center; gap: 12px; padding: 28px 32px;
  }
  .graded-preview .gp-panel {
    flex: 1; height: 80%; border-radius: 8px; position: relative; overflow: hidden;
  }
  .graded-preview .gp-target {
    background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
    opacity: 0.7;
  }
  .graded-preview .gp-yours {
    background: linear-gradient(135deg, #e85d5d, #5bd4c8);
    opacity: 0.45;
    border: 1px dashed rgba(200,255,74,0.2);
  }
  .graded-preview .gp-label {
    position: absolute; bottom: 6px; left: 8px;
    font-size: 7px; color: rgba(255,255,255,0.4); letter-spacing: 0.1em; text-transform: uppercase;
    font-family: 'DM Mono', monospace;
  }
  .card-mines .hero-card-bg { background: linear-gradient(160deg, #1a1a2e, #16213e, #0f3460); opacity: 0.7; }
  .mines-preview {
    position: absolute; inset: 0; z-index: 0; display: grid;
    grid-template-columns: repeat(5, 1fr); grid-template-rows: repeat(4, 1fr);
    gap: 3px; padding: 24px 28px;
  }
  .mines-preview .mc {
    border-radius: 4px; background: #1a1a1d; border: 1px solid #252528;
    display: flex; align-items: center; justify-content: center;
    font-size: 9px; font-weight: 600; font-family: 'DM Mono', monospace;
    opacity: 0.6;
  }
  .mines-preview .mc.open { background: #222226; border-color: #222226; }
  .mines-preview .mc.n1 { color: #60b4ff; }
  .mines-preview .mc.n2 { color: #4aff8c; }
  .mines-preview .mc.n3 { color: #ff6b6b; }
  .mines-preview .mc.flag { color: #c8ff4a; border-color: rgba(200,255,74,0.3); font-size: 10px; }
  .mines-preview .mc.mine { background: rgba(255,107,107,0.15); color: #ff6b6b; font-size: 10px; }
  .card-squares .hero-card-bg { background: linear-gradient(200deg, #2d1b69, #11998e); opacity: 0.5; }
  .squares-preview {
    position: absolute; inset: 0; z-index: 0; display: grid;
    grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(3, 1fr);
    gap: 5px; padding: 24px 28px;
  }
  .squares-preview .sp {
    border-radius: 5px; background: #1a1a1d; border: 1px solid #252528;
    opacity: 0.5; transition: all 0.3s;
  }
  .squares-preview .sp.lit {
    background: #e8e8ea; border-color: #e8e8ea;
    box-shadow: 0 0 12px rgba(232,232,234,0.2);
    opacity: 0.7;
    animation: spGlow 2.5s ease infinite;
  }
  .squares-preview .sp.correct {
    background: #4aff8c; border-color: #4aff8c;
    box-shadow: 0 0 10px rgba(74,255,140,0.2);
    opacity: 0.5;
    animation: spGlow 2.5s ease infinite 0.4s;
  }
  .squares-preview .sp.wrong {
    background: #ff6b6b; border-color: #ff6b6b;
    box-shadow: 0 0 10px rgba(255,107,107,0.2);
    opacity: 0.4;
  }
  @keyframes spGlow { 0%, 100% { opacity: 0.5; } 50% { opacity: 0.8; } }
  .card-3dttt .hero-card-bg { background: linear-gradient(220deg, #667eea 0%, #764ba2 50%, #f093fb 100%); opacity: 0.45; }
  .ttt-preview {
    position: absolute; inset: 0; z-index: 0; display: flex;
    align-items: center; justify-content: center;
    perspective: 500px;
  }
  .ttt-cube {
    width: 100px; height: 100px; position: relative;
    transform-style: preserve-3d;
    animation: tttSpin 14s linear infinite;
  }
  @keyframes tttSpin {
    from { transform: rotateX(-20deg) rotateY(0deg); }
    to   { transform: rotateX(-20deg) rotateY(360deg); }
  }
  .ttt-face {
    position: absolute; width: 100px; height: 100px;
    border: 1px solid rgba(200,255,74,0.1); border-radius: 4px;
    background: rgba(17,17,19,0.5);
    display: grid; grid-template-columns: repeat(3,1fr); gap: 3px; padding: 6px;
    backface-visibility: visible;
  }
  .ttt-face-front  { transform: translateZ(50px); }
  .ttt-face-back   { transform: rotateY(180deg) translateZ(50px); }
  .ttt-face-left   { transform: rotateY(-90deg) translateZ(50px); }
  .ttt-face-right  { transform: rotateY(90deg) translateZ(50px); }
  .ttt-face-top    { transform: rotateX(90deg) translateZ(50px); }
  .ttt-face-bottom { transform: rotateX(-90deg) translateZ(50px); }
  .ttt-cell {
    border-radius: 2px; border: 1px solid rgba(255,255,255,0.04);
    background: rgba(255,255,255,0.02);
    display: flex; align-items: center; justify-content: center;
    font-size: 9px; font-weight: 600;
  }
  .ttt-cell.tx { color: rgba(200,255,74,0.7); background: rgba(200,255,74,0.06); border-color: rgba(200,255,74,0.15); }
  .ttt-cell.to { color: rgba(255,107,107,0.7); background: rgba(255,107,107,0.06); border-color: rgba(255,107,107,0.15); }


  .section-divider { max-width: 1000px; margin: 0 auto; padding: 0 24px; }
  .section-divider .line { width: 100%; height: 1px; background: var(--border); }
  .section-tag {
    font-size: 10px;
    color: var(--muted);
    letter-spacing: 0.14em;
    text-transform: uppercase;
    margin-bottom: 40px;
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .section-tag::after { content: ''; flex: 1; height: 1px; background: var(--border); }

  /* ‚îÄ‚îÄ‚îÄ ABOUT ‚îÄ‚îÄ‚îÄ */
  .about { padding-top: 100px; padding-bottom: 100px; }
  .about-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 64px; align-items: start; }
  .about-heading { font-family: 'Instrument Serif', serif; font-size: clamp(32px, 5vw, 48px); line-height: 1.1; letter-spacing: -1.5px; margin-bottom: 20px; }
  .about-text { font-size: 13px; color: var(--muted); line-height: 1.9; letter-spacing: 0.03em; }
  .about-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 40px; }
  .stat-card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px; transition: border-color 0.3s; }
  .stat-card:hover { border-color: var(--accent); }
  .stat-num { font-family: 'Instrument Serif', serif; font-size: 36px; letter-spacing: -1px; color: var(--accent); margin-bottom: 6px; }
  .stat-label { font-size: 10px; color: var(--muted); letter-spacing: 0.1em; text-transform: uppercase; }

  /* ‚îÄ‚îÄ‚îÄ PROJECTS ‚îÄ‚îÄ‚îÄ */
  .projects { padding-top: 100px; padding-bottom: 100px; }
  .projects-grid { display: flex; flex-direction: column; gap: 20px; }
  .project-row {
    position: relative;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
    text-decoration: none;
    transition: all 0.3s ease;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-height: 260px;
  }
  .project-row:hover { 
    border-color: var(--accent) !important;
    transform: translateY(-4px) !important;
  }
  .project-row-bg {
    position: absolute;
    inset: 0;
    z-index: 0;
    transition: transform 0.4s ease, opacity 0.3s ease;
  }
  .project-row:hover .project-row-bg { 
    transform: scale(1.08) !important;
    opacity: 0.6 !important;
  }
  .project-row-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to right, rgba(17,17,19,0.95) 0%, rgba(17,17,19,0.7) 100%);
    z-index: 1;
    transition: opacity 0.3s ease;
  }
  .project-row:hover .project-row-overlay {
    opacity: 0.85;
  }
  .project-info { padding: 36px; display: flex; flex-direction: column; justify-content: center; gap: 16px; position: relative; z-index: 2; }
  .project-num { font-size: 10px; color: var(--muted); letter-spacing: 0.12em; }
  .project-name { font-family: 'Instrument Serif', serif; font-size: 32px; letter-spacing: -1px; color: var(--text); line-height: 1.1; }
  .project-desc { font-size: 12px; color: var(--muted); line-height: 1.7; letter-spacing: 0.03em; }
  .project-tags { display: flex; gap: 8px; flex-wrap: wrap; }
  .tag { font-size: 10px; color: var(--muted); letter-spacing: 0.08em; padding: 5px 12px; border-radius: 20px; border: 1px solid var(--border); text-transform: uppercase; transition: all 0.2s ease; }
  .project-row:hover .tag { border-color: var(--border2); }
  .project-cta { display: inline-flex; align-items: center; gap: 8px; font-size: 11px; color: var(--accent); letter-spacing: 0.08em; margin-top: 4px; transition: gap 0.2s ease, transform 0.2s ease; }
  .project-row:hover .project-cta { gap: 14px !important; transform: translateX(2px); }

  /* ‚îÄ‚îÄ‚îÄ CONTACT ‚îÄ‚îÄ‚îÄ */
  .contact { padding-top: 100px; padding-bottom: 180px; display: flex; flex-direction: column; align-items: center; }
  .contact-heading { font-family: 'Instrument Serif', serif; font-size: clamp(40px, 7vw, 72px); line-height: 1.05; letter-spacing: -2px; margin-bottom: 12px; text-align: center; }
  .contact-sub { font-size: 13px; color: var(--muted); letter-spacing: 0.04em; line-height: 1.8; max-width: 460px; margin-bottom: 48px; text-align: center; }

  /* ‚îÄ‚îÄ‚îÄ CANVAS SYSTEM ‚îÄ‚îÄ‚îÄ */
  .canvas-wrapper { width: 100%; max-width: 640px; display: flex; flex-direction: column; position: relative; }

  .canvas-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 14px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-bottom: none;
    border-radius: var(--radius) var(--radius) 0 0;
    flex-wrap: wrap;
    gap: 8px;
  }
  .toolbar-group { display: flex; align-items: center; gap: 5px; }
  .toolbar-divider { width: 1px; height: 24px; background: var(--border); margin: 0 2px; }
  .tool-label { font-size: 9px; color: var(--muted); letter-spacing: 0.08em; text-transform: uppercase; margin-right: 2px; }
  .tool-btn {
    width: 32px;
    height: 32px;
    border-radius: 7px;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--muted);
    font-size: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.15s;
    font-family: 'DM Mono', monospace;
  }
  .tool-btn:hover { border-color: var(--text); color: var(--text); }
  .tool-btn.active { border-color: var(--accent); color: var(--accent); background: rgba(200, 255, 74, 0.06); }
  .tool-btn svg { width: 15px; height: 15px; stroke: currentColor; fill: none; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }

  .color-swatch-wrap {
    position: relative; width: 32px; height: 32px; border-radius: 7px; overflow: hidden;
    border: 1px solid var(--border); cursor: pointer; transition: border-color 0.15s;
  }
  .color-swatch-wrap:hover { border-color: var(--text); }
  .color-swatch-inner { position: absolute; inset: 4px; border-radius: 3px; pointer-events: none; }
  .color-swatch-wrap input[type=color] { position: absolute; inset: -4px; width: calc(100% + 8px); height: calc(100% + 8px); opacity: 0; cursor: pointer; }

  .quick-colors { display: flex; gap: 3px; align-items: center; }
  .qc-dot {
    width: 16px; height: 16px; border-radius: 50%; border: 1.5px solid var(--border);
    cursor: pointer; transition: transform 0.15s, border-color 0.15s;
  }
  .qc-dot:hover { transform: scale(1.2); border-color: var(--text); }
  .qc-dot.active-color { border-color: var(--accent); transform: scale(1.15); }

  .brush-slider { width: 72px; }
  .brush-size-val { font-size: 10px; color: var(--text); min-width: 18px; text-align: center; }

  input[type=range] {
    -webkit-appearance: none; height: 3px; border-radius: 2px; background: var(--border); outline: none; cursor: pointer;
  }
  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none; width: 14px; height: 14px; border-radius: 50%; background: var(--text);
    border: 2px solid var(--bg); box-shadow: 0 0 0 1px var(--border); transition: background 0.15s;
  }
  input[type=range]:focus::-webkit-slider-thumb { background: var(--accent); }

  .canvas-frame { position: relative; background: var(--bg); border-left: 1px solid var(--border); border-right: 1px solid var(--border); overflow: hidden; }
  #drawCanvas { display: block; width: 100%; cursor: crosshair; touch-action: none; }

  .cursor-preview {
    position: fixed; border-radius: 50%; border: 1.5px solid rgba(200, 255, 74, 0.5);
    pointer-events: none; z-index: 999; display: none; transform: translate(-50%, -50%);
  }

  .name-input {
    width: 100%; padding: 14px 18px;
    background: var(--surface); border: 1px solid var(--border); border-top: 1px solid var(--border2);
    color: var(--text); font-family: 'DM Mono', monospace; font-size: 13px;
    letter-spacing: 0.03em; outline: none; transition: border-color 0.2s; border-radius: 0;
  }
  .name-input::placeholder { color: var(--muted); }
  .name-input:focus { border-color: var(--accent); }

  .message-textarea {
    width: 100%; min-height: 96px; padding: 16px 18px;
    background: var(--surface); border: 1px solid var(--border); border-top: 1px solid var(--border2);
    color: var(--text); font-family: 'DM Mono', monospace; font-size: 13px; line-height: 1.7;
    letter-spacing: 0.03em; resize: vertical; outline: none; transition: border-color 0.2s; border-radius: 0;
  }
  .message-textarea::placeholder { color: var(--muted); }
  .message-textarea:focus { border-color: var(--accent); }

  .send-bar {
    display: flex; justify-content: space-between; align-items: center; padding: 12px 14px;
    background: var(--surface); border: 1px solid var(--border); border-top: none;
    border-radius: 0 0 var(--radius) var(--radius); gap: 12px;
  }
  .char-count { font-size: 10px; color: var(--muted); letter-spacing: 0.06em; }
  .send-actions { display: flex; gap: 8px; }
  .btn-secondary {
    padding: 9px 16px; background: transparent; color: var(--muted); border: 1px solid var(--border);
    border-radius: 8px; font-family: 'DM Mono', monospace; font-size: 11px; cursor: pointer;
    transition: all 0.2s; letter-spacing: 0.05em;
  }
  .btn-secondary:hover { border-color: var(--text); color: var(--text); }
  .btn-send {
    padding: 9px 22px; background: var(--accent); color: #0a0a0b; border: none; border-radius: 8px;
    font-family: 'DM Mono', monospace; font-size: 11px; font-weight: 500; cursor: pointer;
    letter-spacing: 0.06em; transition: all 0.2s; display: flex; align-items: center; gap: 6px;
  }
  .btn-send:hover { background: #d4ff6a; }
  .btn-send:disabled { opacity: 0.4; cursor: not-allowed; }

  .sent-overlay {
    display: none; position: absolute; inset: 0; background: rgba(10, 10, 11, 0.94);
    z-index: 50; flex-direction: column; align-items: center; justify-content: center;
    gap: 16px; border-radius: var(--radius); animation: fadeIn 0.3s ease;
  }
  .sent-overlay.show { display: flex; }
  .sent-check {
    width: 56px; height: 56px; border-radius: 50%; border: 2px solid var(--accent);
    display: flex; align-items: center; justify-content: center; font-size: 24px;
    color: var(--accent); animation: popIn 0.4s ease 0.1s both;
  }
  @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  .sent-text { font-size: 13px; color: var(--text); letter-spacing: 0.04em; }
  .sent-sub { font-size: 11px; color: var(--muted); letter-spacing: 0.04em; text-align: center; max-width: 280px; line-height: 1.6; }

  /* ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ */
  footer {
    max-width: 1000px; margin: 0 auto; padding: 32px 24px;
    display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 20px;
    font-size: 11px; color: var(--muted); letter-spacing: 0.05em; border-top: 1px solid var(--border);
  }
  footer .footer-center { text-align: center; }
  footer .footer-right { text-align: right; }
  footer a { color: var(--muted); text-decoration: none; transition: color 0.2s; }
  footer a:hover { color: var(--accent); }

  @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  .reveal { opacity: 0; transform: translateY(24px); transition: opacity 0.6s ease, transform 0.6s ease, border .4s ease; }
  .reveal.visible { opacity: 1; transform: translateY(0); }

  @media (max-width: 768px) {
    .hero-cards { grid-template-columns: 1fr; }
    .hero-card { height: 160px; }
    .about-grid { grid-template-columns: 1fr; gap: 40px; }
    .project-row { min-height: 200px; }
    .nav-links { gap: 20px; }
    .canvas-toolbar { padding: 8px 10px; }
    .brush-slider { width: 56px; }
    .quick-colors { display: none; }
    .toolbar-divider:nth-of-type(3) { display: none; }
  }
  @media (max-width: 480px) {
    .nav-links { display: none; }
    .about-stats { grid-template-columns: 1fr; }
    .send-actions { flex-direction: column; }
  }

  .blink { animation: blink 1s step-end infinite; }
  @keyframes blink { 50% { opacity: 0; } }
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--muted); }
</style>
</head>
<body>

<div class="cursor-preview" id="cursorPreview"></div>

<!-- NAV -->
<nav id="mainNav">
  <div class="nav-inner">
    <a href="#" class="logo">taozi<span>.</span></a>
    <ul class="nav-links">
      <li><a href="#home">Home</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#projects">Projects</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </div>
</nav>

<!-- HERO -->
<section class="hero" id="home">
  <div class="hero-badge"><span class="dot"></span> artist & developer</div>
  <h1 class="hero-title">I make small<br><em>games<span class="accent">.</span></em></h1>
  <p class="hero-sub">Browser-based experiments in color, memory, and logic. No installs, no accounts ‚Äî just play<span class="blink">_</span></p>
  <div class="hero-cards">
    <a href="graded.html" target="_blank" class="hero-card card-graded">
      <div class="hero-card-bg"></div>
      <div class="graded-preview">
        <div class="gp-panel gp-target"><span class="gp-label">target</span></div>
        <div class="gp-panel gp-yours"><span class="gp-label">yours</span></div>
      </div>
      <div class="hero-card-overlay"></div>
      <span class="hero-card-arrow">‚Üó</span>
      <div class="hero-card-content">
        <div class="hero-card-title">Graded</div>
        <div class="hero-card-desc">Recreate gradients from memory</div>
      </div>
    </a>
    <a href="mines.html" target="_blank" class="hero-card card-mines">
      <div class="hero-card-bg"></div>
      <div class="mines-preview">
        <div class="mc open n1">1</div><div class="mc"></div><div class="mc open n2">2</div><div class="mc"></div><div class="mc flag">üö©</div>
        <div class="mc open"></div><div class="mc open n1">1</div><div class="mc"></div><div class="mc open n3">3</div><div class="mc"></div>
        <div class="mc"></div><div class="mc open n2">2</div><div class="mc mine">üí£</div><div class="mc"></div><div class="mc open n1">1</div>
        <div class="mc open"></div><div class="mc"></div><div class="mc open n1">1</div><div class="mc open"></div><div class="mc"></div>
      </div>
      <div class="hero-card-overlay"></div>
      <span class="hero-card-arrow">‚Üó</span>
      <div class="hero-card-content">
        <div class="hero-card-title">Mines</div>
        <div class="hero-card-desc">Classic minesweeper</div>
      </div>
    </a>
    <a href="squares.html" target="_blank" class="hero-card card-squares">
      <div class="hero-card-bg"></div>
      <div class="squares-preview">
        <div class="sp"></div><div class="sp lit"></div><div class="sp"></div><div class="sp"></div>
        <div class="sp correct"></div><div class="sp"></div><div class="sp lit"></div><div class="sp wrong"></div>
        <div class="sp"></div><div class="sp"></div><div class="sp correct"></div><div class="sp lit"></div>
      </div>
      <div class="hero-card-overlay"></div>
      <span class="hero-card-arrow">‚Üó</span>
      <div class="hero-card-content">
        <div class="hero-card-title">Squares</div>
        <div class="hero-card-desc">Memory grid challenge</div>
      </div>
    </a>
    <a href="3dtictactoe.html" target="_blank" class="hero-card card-3dttt">
      <div class="hero-card-bg"></div>
      <div class="ttt-preview">
        <div class="ttt-cube">
          <div class="ttt-face ttt-face-front"><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div><div class="ttt-cell"></div><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div><div class="ttt-cell"></div><div class="ttt-cell tx">‚úï</div></div>
          <div class="ttt-face ttt-face-back"><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div><div class="ttt-cell"></div><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div><div class="ttt-cell"></div><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div></div>
          <div class="ttt-face ttt-face-left"><div class="ttt-cell to">‚óã</div><div class="ttt-cell"></div><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div><div class="ttt-cell"></div></div>
          <div class="ttt-face ttt-face-right"><div class="ttt-cell"></div><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div><div class="ttt-cell"></div><div class="ttt-cell"></div><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div><div class="ttt-cell tx">‚úï</div></div>
          <div class="ttt-face ttt-face-top"><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div><div class="ttt-cell"></div><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div></div>
          <div class="ttt-face ttt-face-bottom"><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div><div class="ttt-cell"></div><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div><div class="ttt-cell"></div><div class="ttt-cell to">‚óã</div><div class="ttt-cell tx">‚úï</div><div class="ttt-cell"></div></div>
        </div>
      </div>
      <div class="hero-card-overlay"></div>
      <span class="hero-card-arrow">‚Üó</span>
      <div class="hero-card-content">
        <div class="hero-card-title">3D Tic-Tac-Toe</div>
        <div class="hero-card-desc">5√ó5√ó5 spatial strategy</div>
      </div>
    </a>
  </div>
</section>

<div class="section-divider"><div class="line"></div></div>

<!-- ABOUT -->
<section class="about" id="about">
  <div class="section-tag">About</div>
  <div class="about-grid">
    <div>
      <h2 class="about-heading reveal">Tiny games,<br>big vibes<span style="color:var(--accent)">.</span></h2>
      <p class="about-text reveal" style="transition-delay:0.1s;">I'm taozi4887 ‚Äî an artist and developer who makes small, polished browser games that feel good to play. No frameworks, no bloat. Just clean HTML, CSS, and vanilla JS. Each project is a self-contained experiment: a single file you can open in any browser and start playing immediately.</p>
      <p class="about-text reveal" style="margin-top:16px;transition-delay:0.15s;">Everything here is built with obsessive attention to detail ‚Äî from the typography to the micro-interactions. If it doesn't feel satisfying to click, it's not done yet.</p>
    </div>
    <div class="about-stats reveal" style="transition-delay:0.2s;">
      <div class="stat-card"><div class="stat-num">4</div><div class="stat-label">Games</div></div>
      <div class="stat-card"><div class="stat-num">0</div><div class="stat-label">Dependencies</div></div>
      <div class="stat-card"><div class="stat-num">‚àû</div><div class="stat-label">Replayability</div></div>
      <div class="stat-card"><div class="stat-num">1</div><div class="stat-label">File per game</div></div>
    </div>
  </div>
</section>

<div class="section-divider"><div class="line"></div></div>

<!-- PROJECTS -->
<section class="projects" id="projects">
  <div class="section-tag">Projects</div>
  <div class="projects-grid">
    <a href="graded.html" target="_blank" class="project-row reveal">
      <div class="project-row-bg" style="background:linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 50%, #c8ff4a 100%); opacity: 0.25;"></div>
      <div class="project-row-overlay"></div>
      <div class="project-info">
        <span class="project-num">01</span>
        <h3 class="project-name">Graded<span style="color:var(--accent)">.</span></h3>
        <p class="project-desc">A gradient is shown for a few seconds, then you recreate it from memory using HSL sliders. Scored on color accuracy and angle precision across 5 rounds.</p>
        <div class="project-tags"><span class="tag">Color</span><span class="tag">Memory</span><span class="tag">HSL</span></div>
        <span class="project-cta">Play now ‚Üó</span>
      </div>
    </a>
    <a href="mines.html" target="_blank" class="project-row reveal">
      <div class="project-row-bg" style="background:linear-gradient(160deg, #1a1a2e, #16213e, #0f3460); opacity: 0.4;"></div>
      <div class="project-row-overlay"></div>
      <div class="project-info">
        <span class="project-num">02</span>
        <h3 class="project-name">Mines<span style="color:var(--accent2)">.</span></h3>
        <p class="project-desc">The classic minesweeper experience, rebuilt from scratch with a dark, minimal interface. Flag bombs, clear the board, and try not to explode.</p>
        <div class="project-tags"><span class="tag">Logic</span><span class="tag">Strategy</span><span class="tag">Classic</span></div>
        <span class="project-cta">Play now ‚Üó</span>
      </div>
    </a>
    <a href="squares.html" target="_blank" class="project-row reveal">
      <div class="project-row-bg" style="background:linear-gradient(200deg, #2d1b69, #11998e); opacity: 0.35;"></div>
      <div class="project-row-overlay"></div>
      <div class="project-info">
        <span class="project-num">03</span>
        <h3 class="project-name">Squares<span style="color:var(--accent3)">.</span></h3>
        <p class="project-desc">A grid of squares lights up briefly ‚Äî memorize which ones, then tap them back. The grid grows larger with each level. How far can your memory take you?</p>
        <div class="project-tags"><span class="tag">Memory</span><span class="tag">Pattern</span><span class="tag">Progressive</span></div>
        <span class="project-cta">Play now ‚Üó</span>
      </div>
    </a>
    <a href="3dtictactoe.html" target="_blank" class="project-row reveal">
      <div class="project-row-bg" style="background:linear-gradient(220deg, #667eea 0%, #764ba2 50%, #f093fb 100%); opacity: 0.3;"></div>
      <div class="project-row-overlay"></div>
      <div class="project-info">
        <span class="project-num">04</span>
        <h3 class="project-name">3D Tic-Tac-Toe<span style="color:var(--accent)">.</span></h3>
        <p class="project-desc">A twist on the classic game played on a 5√ó5√ó5 cube. Get five in a row across any dimension ‚Äî horizontal, vertical, diagonal, or through depth. Two players, one screen.</p>
        <div class="project-tags"><span class="tag">Strategy</span><span class="tag">3D</span><span class="tag">Local Multiplayer</span></div>
        <span class="project-cta">Play now ‚Üó</span>
      </div>
    </a>
  </div>
</section>

<div class="section-divider"><div class="line"></div></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- CONTACT ‚Äî DRAW ME SOMETHING            -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section class="contact" id="contact">
  <div class="section-tag" style="width:100%;">Contact</div>

  <h2 class="contact-heading reveal">Draw me<br>something<span style="color:var(--accent)">.</span></h2>
  <p class="contact-sub reveal" style="transition-delay:0.1s;">Skip the boring form. Sketch a doodle, write a note, and send it to me as a framed postcard.</p>

  <div class="canvas-wrapper reveal" style="transition-delay:0.2s;">

    <!-- Toolbar -->
    <div class="canvas-toolbar">
      <div class="toolbar-group">
        <span class="tool-label">Tool</span>
        <button class="tool-btn active" id="toolPen" onclick="setTool('pen')" title="Pen">
          <svg viewBox="0 0 24 24"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/></svg>
        </button>
        <button class="tool-btn" id="toolEraser" onclick="setTool('eraser')" title="Eraser">
          <svg viewBox="0 0 24 24"><path d="m7 21 10 0"/><path d="M5.5 13.5 12 7l7 7-4.5 4.5c-.8.8-2.2.8-3 0Z"/></svg>
        </button>
      </div>

      <div class="toolbar-divider"></div>

      <div class="toolbar-group">
        <span class="tool-label">Size</span>
        <input type="range" class="brush-slider" min="1" max="40" value="4" id="brushSize" oninput="updateBrushSize(this.value)">
        <span class="brush-size-val" id="brushSizeVal">4</span>
      </div>

      <div class="toolbar-divider"></div>

      <div class="toolbar-group">
        <span class="tool-label">Color</span>
        <div class="color-swatch-wrap">
          <div class="color-swatch-inner" id="colorSwatchInner" style="background:#e8e8ea;"></div>
          <input type="color" id="colorPicker" value="#e8e8ea" oninput="setColor(this.value)">
        </div>
        <div class="quick-colors">
          <div class="qc-dot active-color" style="background:#e8e8ea;" data-color="#e8e8ea" onclick="pickQuickColor(this)"></div>
          <div class="qc-dot" style="background:#c8ff4a;" data-color="#c8ff4a" onclick="pickQuickColor(this)"></div>
          <div class="qc-dot" style="background:#ff6b6b;" data-color="#ff6b6b" onclick="pickQuickColor(this)"></div>
          <div class="qc-dot" style="background:#60efff;" data-color="#60efff" onclick="pickQuickColor(this)"></div>
          <div class="qc-dot" style="background:#ffd200;" data-color="#ffd200" onclick="pickQuickColor(this)"></div>
          <div class="qc-dot" style="background:#a18cd1;" data-color="#a18cd1" onclick="pickQuickColor(this)"></div>
        </div>
      </div>

      <div class="toolbar-divider"></div>

      <div class="toolbar-group">
        <button class="tool-btn" onclick="undoStroke()" title="Undo (Ctrl+Z)">
          <svg viewBox="0 0 24 24"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        </button>
        <button class="tool-btn" id="redoBtn" onclick="redoStroke()" title="Redo (Ctrl+Y)">
          <svg viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.13-9.36L23 10"/></svg>
        </button>
        <button class="tool-btn" onclick="clearCanvas()" title="Clear">
          <svg viewBox="0 0 24 24"><path d="M3 6h18"/><path d="M8 6V4h8v2"/><path d="M5 6l1 14h12l1-14"/></svg>
        </button>
      </div>
    </div>

    <!-- Canvas -->
    <div class="canvas-frame" id="canvasFrame">
      <canvas id="drawCanvas" width="1280" height="720"></canvas>
    </div>

    <!-- Name + Message + Send -->
    <input class="name-input" id="nameBox" type="text" placeholder="Your name (optional)" maxlength="60" autocomplete="off">
    <textarea class="message-textarea" id="messageBox" placeholder="Add a message... (optional)" maxlength="500" oninput="updateCharCount()"></textarea>
    <div class="send-bar">
      <span class="char-count" id="charCount">0 / 500</span>
      <div class="send-actions">
        <button class="btn-secondary" onclick="downloadFramed()">Save PNG</button>
        <button class="btn-send" id="sendBtn" onclick="sendMessage()">Send ‚Üí</button>
      </div>
    </div>

    <!-- Sent overlay -->
    <div class="sent-overlay" id="sentOverlay">
      <div class="sent-check">‚úì</div>
      <div class="sent-text">Postcard ready!</div>
      <div class="sent-sub">Your framed drawing was saved. Attach it to the email that just opened.</div>
      <button class="btn-secondary" style="margin-top:12px;" onclick="resetContact()">Draw another</button>
    </div>

  </div>
</section>

<footer>
  <span class="footer-left">¬© 2026 taozi4887</span>
  <span class="footer-center">Built with care<span style="color:var(--accent)">.</span></span>
  <span class="footer-right">
    <a href="https://www.instagram.com/taozi4887/" target="_blank" rel="noopener">Instagram</a> ¬∑ 
    <a href="https://github.com/taozi8887" target="_blank" rel="noopener">GitHub</a>
  </span>
</footer>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  DRAWING ENGINE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const canvas = document.getElementById('drawCanvas');
const ctx = canvas.getContext('2d');
const BG = '#0a0a0b';

let tool = 'pen';
let brushColor = '#e8e8ea';
let brushSizeNum = 4;
let isDrawing = false;
let lastX = 0, lastY = 0;
let history = [];
let historyStep = -1;
const MAX_HIST = 50;

function saveState() {
  // Remove any states after current step (happens after undo then new action)
  historyStep++;
  if (historyStep < history.length) {
    history.length = historyStep;
  }
  
  // Add current state
  history.push(canvas.toDataURL());
  
  // Limit history size
  if (history.length > MAX_HIST) {
    history.shift();
    historyStep--;
  }
}

function restoreState(dataURL) {
  const img = new Image();
  img.onload = () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = BG;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(img, 0, 0);
  };
  img.src = dataURL;
}

function undoStroke() {
  if (historyStep > 0) {
    historyStep--;
    restoreState(history[historyStep]);
  }
}

function redoStroke() {
  if (historyStep < history.length - 1) {
    historyStep++;
    restoreState(history[historyStep]);
  }
}

function clearCanvas() {
  ctx.fillStyle = BG;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  history = [];
  historyStep = -1;
  saveState();
}
clearCanvas();

function getScale() {
  const r = canvas.getBoundingClientRect();
  return { x: canvas.width / r.width, y: canvas.height / r.height };
}

function getPos(e) {
  const r = canvas.getBoundingClientRect();
  const s = getScale();
  const cx = e.touches ? e.touches[0].clientX : e.clientX;
  const cy = e.touches ? e.touches[0].clientY : e.clientY;
  return { x: (cx - r.left) * s.x, y: (cy - r.top) * s.y };
}

function effBrush() { return brushSizeNum * getScale().x; }

function startDraw(e) {
  e.preventDefault();
  isDrawing = true;
  const p = getPos(e);
  lastX = p.x; lastY = p.y;
  ctx.beginPath();
  ctx.arc(lastX, lastY, effBrush() / 2, 0, Math.PI * 2);
  ctx.fillStyle = tool === 'eraser' ? BG : brushColor;
  ctx.fill();
}

function draw(e) {
  if (!isDrawing) return;
  e.preventDefault();
  const p = getPos(e);
  ctx.beginPath();
  ctx.moveTo(lastX, lastY);
  ctx.lineTo(p.x, p.y);
  ctx.lineWidth = effBrush();
  ctx.lineCap = 'round';
  ctx.lineJoin = 'round';
  ctx.strokeStyle = tool === 'eraser' ? BG : brushColor;
  ctx.stroke();
  lastX = p.x; lastY = p.y;
}

function endDraw() {
  if (isDrawing) {
    isDrawing = false;
    saveState(); // Save state after stroke is complete
  }
}

canvas.addEventListener('mousedown', startDraw);
canvas.addEventListener('mousemove', draw);
canvas.addEventListener('mouseup', endDraw);
canvas.addEventListener('mouseleave', endDraw);
canvas.addEventListener('touchstart', startDraw, { passive: false });
canvas.addEventListener('touchmove', draw, { passive: false });
canvas.addEventListener('touchend', endDraw);
canvas.addEventListener('touchcancel', endDraw);

// Cursor preview
const cursorEl = document.getElementById('cursorPreview');
const frameEl = document.getElementById('canvasFrame');
frameEl.addEventListener('mouseenter', () => { cursorEl.style.display = 'block'; canvas.style.cursor = 'none'; });
frameEl.addEventListener('mouseleave', () => { cursorEl.style.display = 'none'; canvas.style.cursor = 'crosshair'; });
frameEl.addEventListener('mousemove', (e) => {
  cursorEl.style.left = e.clientX + 'px';
  cursorEl.style.top = e.clientY + 'px';
  const sz = brushSizeNum + 4;
  cursorEl.style.width = sz + 'px';
  cursorEl.style.height = sz + 'px';
  cursorEl.style.borderColor = tool === 'eraser' ? 'rgba(255,107,107,0.5)' : 'rgba(200,255,74,0.5)';
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  TOOLBAR
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function setTool(t) {
  tool = t;
  document.getElementById('toolPen').classList.toggle('active', t === 'pen');
  document.getElementById('toolEraser').classList.toggle('active', t === 'eraser');
}
function updateBrushSize(v) {
  brushSizeNum = parseInt(v);
  document.getElementById('brushSizeVal').textContent = v;
}
function setColor(hex) {
  brushColor = hex;
  document.getElementById('colorSwatchInner').style.background = hex;
  document.getElementById('colorPicker').value = hex;
  document.querySelectorAll('.qc-dot').forEach(d => {
    d.classList.toggle('active-color', d.dataset.color.toLowerCase() === hex.toLowerCase());
  });
  setTool('pen');
}
function pickQuickColor(el) { setColor(el.dataset.color); }
function updateCharCount() {
  document.getElementById('charCount').textContent = `${document.getElementById('messageBox').value.length} / 500`;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  FRAMED PNG GENERATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function generateFramedPNG() {
  const pad = 48;
  const headerH = 60;
  const footerH = 56;
  const msgText = document.getElementById('messageBox').value.trim();
  const msgH = msgText ? 80 : 0;
  const dW = canvas.width;
  const dH = canvas.height;
  const W = dW + pad * 2;
  const H = pad + headerH + dH + msgH + footerH + pad;

  const fc = document.createElement('canvas');
  fc.width = W; fc.height = H;
  const fx = fc.getContext('2d');

  // BG
  fx.fillStyle = '#0d0d0f';
  fx.fillRect(0, 0, W, H);

  // Border
  fx.strokeStyle = '#303035';
  fx.lineWidth = 1;
  roundRect(fx, 20, 20, W - 40, H - 40, 14);
  fx.stroke();

  // Accent top bar
  fx.fillStyle = '#c8ff4a';
  fx.fillRect(pad, pad, W - pad * 2, 2);

  // Header ‚Äî brand
  fx.fillStyle = '#e8e8ea';
  fx.font = 'italic 26px "Instrument Serif", Georgia, serif';
  fx.textBaseline = 'middle';
  fx.fillText('taozi.', pad + 6, pad + 14 + headerH / 2);

  // Header ‚Äî date
  const date = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
  fx.fillStyle = '#666670';
  fx.font = '300 14px "DM Mono", monospace';
  fx.textAlign = 'right';
  fx.fillText(date, W - pad - 6, pad + 14 + headerH / 2);
  fx.textAlign = 'left';

  // Drawing border
  const drawY = pad + headerH + 8;
  fx.strokeStyle = '#252528';
  fx.lineWidth = 1;
  fx.strokeRect(pad - 1, drawY - 1, dW + 2, dH + 2);

  // User's drawing
  fx.drawImage(canvas, pad, drawY);

  // Message
  if (msgH > 0) {
    const mY = drawY + dH + 20;
    // Accent bar
    fx.fillStyle = '#c8ff4a';
    roundRect(fx, pad, mY, 3, 36, 1.5);
    fx.fill();
    // Text
    fx.fillStyle = '#b8b8be';
    fx.font = '300 16px "DM Mono", Consolas, monospace';
    wrapText(fx, '"' + msgText + '"', pad + 16, mY + 14, W - pad * 2 - 24, 22, 2);
  }

  // Footer divider
  const fY = H - pad - footerH + 8;
  fx.fillStyle = '#252528';
  fx.fillRect(pad, fY, W - pad * 2, 1);
  // Footer text
  fx.fillStyle = '#555560';
  fx.font = '300 12px "DM Mono", monospace';
  fx.fillText('sent via taozi4887.dev', pad + 4, fY + 30);
  // From name (right side)
  const senderName = document.getElementById('nameBox').value.trim();
  if (senderName) {
    fx.fillStyle = '#c8ff4a';
    fx.font = '400 12px "DM Mono", monospace';
    fx.textAlign = 'right';
    fx.fillText('from ' + senderName, W - pad - 4, fY + 30);
    fx.textAlign = 'left';
  } else {
    // Footer dot (fallback when no name)
    fx.fillStyle = '#c8ff4a';
    fx.beginPath();
    fx.arc(W - pad - 8, fY + 28, 3, 0, Math.PI * 2);
    fx.fill();
  }

  return fc;
}

function roundRect(c, x, y, w, h, r) {
  c.beginPath();
  c.moveTo(x + r, y);
  c.lineTo(x + w - r, y);
  c.quadraticCurveTo(x + w, y, x + w, y + r);
  c.lineTo(x + w, y + h - r);
  c.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
  c.lineTo(x + r, y + h);
  c.quadraticCurveTo(x, y + h, x, y + h - r);
  c.lineTo(x, y + r);
  c.quadraticCurveTo(x, y, x + r, y);
  c.closePath();
}

function wrapText(c, text, x, y, maxW, lh, maxLines) {
  const words = text.split(' ');
  let line = '';
  let ln = 0;
  for (let i = 0; i < words.length; i++) {
    const test = line + words[i] + ' ';
    if (c.measureText(test).width > maxW && i > 0) {
      c.fillText(line.trim(), x, y + ln * lh);
      line = words[i] + ' ';
      ln++;
      if (ln >= maxLines) {
        c.fillText(line.trim() + '‚Ä¶', x, y + ln * lh);
        return;
      }
    } else {
      line = test;
    }
  }
  c.fillText(line.trim(), x, y + ln * lh);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  DOWNLOAD & SEND
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function downloadFramed() {
  const framed = generateFramedPNG();
  const a = document.createElement('a');
  a.download = 'taozi-postcard-' + Date.now() + '.png';
  a.href = framed.toDataURL('image/png');
  a.click();
}

function sendMessage() {
  const btn = document.getElementById('sendBtn');
  btn.disabled = true;
  btn.textContent = 'Preparing...';

  // 1. Download framed PNG
  const framed = generateFramedPNG();
  const fname = 'taozi-postcard-' + Date.now() + '.png';
  const a = document.createElement('a');
  a.download = fname;
  a.href = framed.toDataURL('image/png');
  a.click();

  // 2. Open mailto with message
  const msg = document.getElementById('messageBox').value.trim();
  const name = document.getElementById('nameBox').value.trim();
  const subject = encodeURIComponent('Postcard from your site ‚úâ');
  const body = encodeURIComponent(
    (name ? 'From: ' + name + '\n' : '') +
    (msg ? msg + '\n\n' : '') +
    '---\n' +
    'Please attach: ' + fname + '\n' +
    'Sent from taozi4887.dev'
  );

  setTimeout(() => {
    window.location.href = 'mailto:mail@taozi4887.dev?subject=' + subject + '&body=' + body;
  }, 500);

  // 3. Show confirmation
  setTimeout(() => {
    document.getElementById('sentOverlay').classList.add('show');
    btn.disabled = false;
    btn.textContent = 'Send ‚Üí';
  }, 1100);
}

function resetContact() {
  document.getElementById('sentOverlay').classList.remove('show');
  clearCanvas();
  document.getElementById('nameBox').value = '';
  document.getElementById('messageBox').value = '';
  updateCharCount();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  SCROLL REVEALS & NAV
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const reveals = document.querySelectorAll('.reveal');
const obs = new IntersectionObserver((entries) => {
  entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); obs.unobserve(e.target); } });
}, { threshold: 0.12, rootMargin: '0px 0px -40px 0px' });
reveals.forEach(el => obs.observe(el));

const navEl = document.getElementById('mainNav');
window.addEventListener('scroll', () => { navEl.classList.toggle('scrolled', window.scrollY > 40); }, { passive: true });

document.querySelectorAll('.nav-links a').forEach(link => {
  link.addEventListener('click', e => {
    e.preventDefault();
    const t = document.querySelector(link.getAttribute('href'));
    if (t) t.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  KEYBOARD SHORTCUTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
document.addEventListener('keydown', (e) => {
  // Only when contact section is visible or focused
  const contactSection = document.querySelector('.contact');
  const rect = contactSection.getBoundingClientRect();
  const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
  
  if (!isVisible) return;
  
  // Don't interfere with typing in textarea
  if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'INPUT') return;
  
  const key = e.key.toLowerCase();
  
  // P = Pen
  if (key === 'p') {
    e.preventDefault();
    setTool('pen');
  }
  
  // E = Eraser
  if (key === 'e') {
    e.preventDefault();
    setTool('eraser');
  }
  
  // Ctrl+Z = Undo
  if ((e.ctrlKey || e.metaKey) && key === 'z' && !e.shiftKey) {
    e.preventDefault();
    undoStroke();
  }
  
  // Ctrl+Shift+Z or Ctrl+Y = Redo
  if ((e.ctrlKey || e.metaKey) && (key === 'y' || (key === 'z' && e.shiftKey))) {
    e.preventDefault();
    redoStroke();
  }
});
</script>
</body>
</html>